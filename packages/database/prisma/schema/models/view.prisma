/// 논문 조회 기록 모델
/// 사용자의 논문 조회 이력을 추적
/// 통계 분석 및 추천 알고리즘에 사용
model PaperView {
  /// 조회 기록 고유 ID (UUID)
  id String @id @default(uuid())

  /// 사용자 ID (선택 사항)
  /// 로그인한 사용자의 경우에만 기록
  userId String?

  /// 사용자 객체
  /// 사용자 삭제 시 조회 기록도 함께 삭제 (Cascade)
  user User? @relation(fields: [userId], references: [id], onDelete: Cascade)

  /// 논문 ID
  paperId String

  /// 논문 객체
  /// 논문 삭제 시 조회 기록도 함께 삭제 (Cascade)
  paper Paper @relation(fields: [paperId], references: [id], onDelete: Cascade)

  /// 조회 시간 (초 단위)
  /// 사용자가 논문 페이지에 머문 시간
  /// 관심도 측정에 사용
  durationSeconds Int @default(0)

  /// IP 주소 (선택 사항)
  /// 비로그인 사용자 추적 및 중복 조회 방지에 사용
  ipAddress String?

  /// User Agent (선택 사항)
  /// 브라우저 및 기기 정보
  /// 통계 분석에 사용
  userAgent String?

  /// 조회 시각
  createdAt DateTime @default(now())

  /// 사용자별 조회 이력 조회를 위한 인덱스
  @@index([userId])
  /// 논문별 조회 수 집계를 위한 인덱스
  @@index([paperId])
  /// 시간대별 조회 통계를 위한 인덱스
  @@index([createdAt])
}
