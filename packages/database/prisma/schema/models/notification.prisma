model Notification {
  id String @id @default(uuid())

  userId String
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  type NotificationType

  message String @db.Text

  relatedPaperId String?
  relatedPaper   Paper?  @relation(fields: [relatedPaperId], references: [id], onDelete: SetNull)

  relatedDiscussionId String?
  relatedDiscussion   Discussion? @relation("DiscussionNotifications", fields: [relatedDiscussionId], references: [id], onDelete: SetNull)

  relatedUserId String?
  relatedUser   User?   @relation("RelatedUserNotifications", fields: [relatedUserId], references: [id], onDelete: SetNull)

  isRead Boolean @default(false)

  readAt DateTime?

  createdAt DateTime @default(now())

  @@index([userId])
  @@index([isRead])
  @@index([type])
  @@index([createdAt])
}

/// 알림 타입
enum NotificationType {
  RECOMMENDED_PAPER
  SIMILAR_PAPER
  OPPOSING_PAPER
  DISCUSSION_ACTIVITY
  SYSTEM
}
